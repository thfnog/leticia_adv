!function(t){var e=[],n=function(t,e){return null!=e&&t.bSub&&t.bSub[(t._l=!!e)?"addClass":"removeClass"](t._lcb),t._l},i=function(i){var s,c=i.F;return!n(i)&&(n(i,!0),s="string"==t.type(i.file)?c.find(i.file):t(i.file),i.box&&t.each(i.box,function(t,e){e.e.find(".msg").addClass("no").removeClass("ok err")}),s.upfile(function(s,r){!1!==(i.filea&&i.filea(i,s,r))&&t.post("ajax/"+(i.u||"")+(i.a||"")+".json",c.serialize(),function(e){if(!1!==(i.success&&i.success(i,e,s,r))){if(e.bok=0,e.berr=0,e.box&&i.box&&t.each(e.box,function(n,a,o){(o=i.box[n])&&(a.ok&&(e.bok+=a.ok),a.err&&(e.berr+=a.err),t.each(a,function(e,n){if(t.isNumeric(e)){var i=b.el(o,e);n.m&&i.find(".msg").addClass(n.ok?"ok":n.noup?"":"err").removeClass("no").html(n.m),null!=n.id&&i.find(".c-id").val(n.rmv?0:n.id),n.rmv&&b.rmv(o,e)}}))}),null!=e.id&&t(i.f.id).val(e.id),e.ok){if(!1===(i.ok&&i.ok(i,e,s,r)))return}else if(e.noup){if(!1===(i.noup&&i.noup(i,e,s,r)))return}else if(!1===(i.no&&i.no(i,e,s,r)))return;if(i.id||!e.ok&&!e.noup||e.berr||a(i,e,s,r),e.ok&&i.id&&e.i&&i.i&&t.each(e.i,function(t,e){o(i,i.i[t]=e,t),l(i,e,t)}),e.noi&&i.i&&t.each(e.noi,function(t,e){e&&(o(i,i.i[t],t),l(i,i.i[t],t))}),e.m){t("#sys-notification").show();var n=1==e.ok?"success":"danger",c=1==e.ok?"check":"question";t("#notification").html('<div class="alert alert-'+n+'"><i class="fa fa-'+c+'-circle"></i> '+e.m+'<button type="button" class="close" data-dismiss="alert">×</button></div>').show(),setTimeout(function(){t("#notification").hide()},5e3),e.resetCaptcha&&grecaptcha.reset()}if(e.news){t("#sys-notification-news").show();n=1==e.ok?"success":"danger",c=1==e.ok?"check":"question";t("#news-notification").html('<div class="alert alert-'+n+'"><i class="fa fa-'+c+'-circle"></i> '+e.news+'<button type="button" class="close" data-dismiss="alert">×</button></div>').show(),setTimeout(function(){t("#news-notification").hide()},5e3)}if(e.e&&t.each(e.e,function(e,n){var i=t("#"+e).attr("placeholder");return t("#"+e).attr("data-placeholder",i),t("#"+e).addClass("haserror").css("border-color","#f00").attr("placeholder",n),hasError(e)}),e.f)return t("#"+e.f).focus().addClass("haserror").css("border-color","#f00").scrollTop(),hasError(e.f);"string"==t.type(e.l)&&(location=e.l)}},"json").complete(function(a){var o=e.length,l=a.responseText,c=window.console&&console.log&&console;if(i.debug&&alert(l),i.log){try{l=t.parseJSON(l)}catch(t){}e[o]=l,c&&c.log(o),c&&c.log(l)}!1!==(i.complete&&i.complete(i,a,s,r))&&n(i,!1)})},function(e,n,a){!1!==(i.fileb&&i.fileb(i,e,n))&&(o(i,n.tf,a=t(e.e).attr("i")),l(i,n.n,a))},i.upfile),!1)},a=function(e,n,i,a){!1!==(e.reset&&e.reset(e,n,i,a))&&(e.f.reset(),e.F.find("textarea").each(function(e,n){(n=t(n).data()).edt&&n.edt.set()}),e.box&&t.each(e.box,function(e,n){n.e.find(">div").hide(300,function(){t(this).remove()})}),e.i&&t.each(e.i,function(t){o(e,0,t),l(e,0,t)}),e.y&&t.each(e.y,function(t){s(e,0,t)}))},o=function(e,n,i){t("#img-view"+(i?"-"+i:"")).css("display",n?"":"none").find("img").attr("src",n||"")},l=function(e,n,i){t("#text-view"+(i?"-"+i:"")).css("display",n?"":"none").find(".text").text(n)},s=function(e,n,i){t("#ytb-view"+(i?"-"+i:"")).css("display",n?"":"none").find("iframe").attr("src",n?"http://www.youtube.com/embed/"+n+"?rel=0":"")},c=function(e,n,i){(n=t(n).hide())[n.attr("tipo")||"prepend"](t(i).addClass(n.attr("cls"))),n.removeAttr("cls tipo")},r=function(e,n){c(0,t("#img-view"+(n?"-"+n:"")),'<label><div class="img"><img/></div></label>')},u=function(e,n){c(0,t("#text-view"+(n?"-"+n:"")),'<label><span class="text"></span></label>')},f=function(e,n){c(0,t("#ytb-view"+(n?"-"+n:"")),'<label><span class="label"></span><iframe src="javascript:;" width="560" height="315" frameborder="0" allowfullscreen="allowfullscreen" allowtransparency="allowtransparency"></iframe></label>')},d=function(e,n,i,a,o){i=(n=t(n)).attr("i")||n.attr("name"),a=/^.*(?:(?:youtu.be\/)|(?:v\/)|(?:\/u\/\w\/)|(?:embed\/)|(?:watch\?))\??v?=?([^#&?]*).*/,o=n.val(),a.test(o)&&n.val(o=n.val().replace(a,"$1")),11!=o.length&&n.val(o=""),o!=e.y[i]&&s(e,e.y[i]=o,i)},b={i:0,el:function(e,n){return t("#"+e.p+"-"+n)},rmv:function(t,e){var n=b.el(t,e);n.hide(300,function(){n.find(".c-id[value=0]").length&&n.remove()}).find(".c-rmv").val(1)},add:function(e,n){var i,a=b.i++;n=t.extend({id:0,rmv:0},e.v||{},n||{}),(i=t(['<div class="form form-in" id="'+e.p+"-"+a+'">','<input type="hidden" class="c-id"/>','<input type="hidden" class="c-rmv"/>','<span class="ico idel close" style="opacity:1"></span>','<label class="top msg no"></label>',"</div>"].join(""))).hide().append(e.html||"").find(".ico.close:first").attr("title",e.r||"").click(function(){b.rmv(e,a)}),e.init&&e.init(e,i,n),t.each(n,function(n,o){var l=i.find(".c-"+n).attr("name","box["+e.k+"]["+n+"]["+a+"]"),s=(l.attr("type")||"").toLowerCase();"checkbox"===s?l.attr("checked",!!o):"radio"===s?l.each(function(e,n){(n=t(n)).attr("checked",o==n.val())}):"file"!==s&&l.val(null==o?"":o)}),e.e.append(i),e.load&&e.load(e,i,n),i.show(300)}},h=function(e,n,i){"string"==t.type(i)&&(n=i),n=n||"",(i=t.extend(!0,{k:n},v,"object"==t.type(i)&&i||{}))._=e,n&&(e.box[n]=i);var a=t('<h3 style="display:none"></h3>').text(i.t||""),o=t('<label><span class="ico iadd" style="float:left"></span><h3 style="float:left;margin:4px">'+i.t+"</h3></label>").attr("title",i.a||"").click(function(){b.add(i)});return n&&!i.p&&(i.p="box-"+n),i.e=t("#"+i.p).after(o),i.t&&i.e.before(a),i.html=t.isArray(i.html)&&i.html.join("")||i.html||"",t.each("init load".split(" "),function(e,n){i[n]=!1!==i[n]&&(t.isFunction(i[n])&&i[n]||null)}),i.rs&&t.each(i.rs,function(){b.add(i,this)}),i},p=function(e){var n,a=t(e.F||m.F),c=a[0],b=a.addClass(e.style?"form":"").find("input[type=hidden][name=id]");e.submit&&a.submit(function(){return i(e)}),e.F=a,e.f=c,b.length||a.prepend('<input type="hidden" name="id" value="'+e.id+'"/>'),null==e.bSub&&(e.bSub=m.bSub),null==e.file&&(e.file=m.file),"string"==t.type(e.bSub)&&(e.bSub=a.find(e.bSub)[0]),e.bSub=t(e.bSub).addClass(e.style?"block":"").attr("title",n=t.isArray(e.sub)&&e.sub[e.id?1:0]||e.sub||""),e.bSubFind?e.bSub.find(e.bSubFind).html(n):e.bSub.val(n),e.back&&(e.bBack=t('<a class="btn btn-danger">Voltar</a>').attr("href",e.back),e.bSub.addClass("left mr").after(e.bBack)),e.i&&t.each(e.i,function(t,n){r(0,t),u(0,t),o(e,n,t),l(e,n,t)}),e.y&&t.each(e.y,function(n,i){f(0,n),s(e,i,n),t(c[n]).change(function(){d(e,this)}).change()}),e.box&&t.each(e.box,function(t,n){h(e,t,n)}),e.load&&e.load(e,a,c)},m={_l:!1,_lcb:"face",u:"u/",a:"",F:"#id-form",f:null,style:!0,submit:!0,upfile:null,file:"[type=file]",sub:["Cadastrar","Salvar"],bSub:"[type=submit]",bSubFind:"",bBack:null,back:"",_load:0,id:0,i:{},y:{},debug:!1,log:!1,box:{},l:function(t){return n(this,t)},up:function(){return i(this)},_reset:function(t,e,n){a(this,t,e,n)},img:function(t,e){o(this,t,e)},text:function(t,e){l(this,t,e)},ytb:function(t,e){s(this,t,e)},_add:function(t,e){c(0,t,e)},_img:function(t){r(0,t)},_text:function(t){u(0,t)},_ytb:function(t){f(0,t)},cgY:function(t){d(this,t)},init:function(){p()},addBox:function(t,e){h(this,t,e)}},v={t:"",p:"",a:"",r:"",html:"",e:null,_:null,v:{},rs:[],el:function(t){return b.el(this,t)},rmv:function(t){b.rmv(this,t)},add:function(t){b.add(this,t)}};t.formLogs=e,t.form=function(e){var n=t.extend(!0,{},m,e||{});return t.each("load filea fileb success complete ok noup no reset".split(" "),function(e,i){n[i]=!1!==n[i]&&(t.isFunction(n[i])&&n[i]||null)}),n._load||t(function(){p(n)}),1===n._load&&p(n),n}}(jQuery);